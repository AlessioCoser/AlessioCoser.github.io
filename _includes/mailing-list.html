<h5><span>Let's keep<br />in touch</span></h5>
<div id="keep-in-touch">
  <input id="keep-in-touch-email" type="email" placeholder="your@email.com"/>
  <br /><br />
  <button id="keep-in-touch-button" disabled="disabled" type="button" style="font-size: 15px" class="btn btn-primary text-white btn-lg px-2 py-2 col-sm-12 font-weight-bold">Receive updates</button>

  <script>
    {% if jekyll.environment != "production" %}
      function plausible(event, props) { console.log(`Fired Plausible Event '${event}' with ${JSON.stringify(props)}`)}
    {% endif %}
    var emailButton = document.getElementById('keep-in-touch-button')
    var emailInput = document.getElementById('keep-in-touch-email')

    function clearKeepInTouchEmail() {
      emailButton.className = emailButton.className.split('btn-success').join('btn-primary')
      emailButton.innerHTML = 'Receive updates'
    }

    function emailIsValid(email) {
      return String(email)
        .toLowerCase()
        .match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)
    }

    function onKeepInTouchEmailChange(e) {
      if (emailIsValid(e.target.value)) {
        emailButton.disabled = false
      } else {
        emailButton.disabled = true
      }
    }

    function onKeepInTouchButtonClick(e) {
      emailButton.disabled = true
      plausible('KeepInTouch', {props: { email: emailInput.value }})
      emailInput.value = ''
      emailButton.className = emailButton.className.split('btn-primary').join('btn-success')
      emailButton.innerHTML = 'Thank you!'
      setTimeout(clearKeepInTouchEmail, 2000)
    }

    emailButton.addEventListener('click', onKeepInTouchButtonClick)
    emailInput.addEventListener('change', onKeepInTouchEmailChange)
    emailInput.addEventListener('keyup', onKeepInTouchEmailChange)
  </script>
</div>